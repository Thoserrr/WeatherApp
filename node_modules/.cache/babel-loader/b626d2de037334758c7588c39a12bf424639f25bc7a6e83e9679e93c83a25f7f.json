{"ast":null,"code":"const OPENCAGE_API_KEY = 'ce758446e9d24c0aac1cd8dfb60f757a'; // API Key ของ OpenCage\nconst WEATHER_API_URL = 'https://api.openweathermap.org/data/2.5';\nconst WEATHER_API_KEY = '355a483234ca10a5677f31949a9a0241';\n\n// ดึงข้อมูลสภาพอากาศ (ปัจจุบัน + พยากรณ์) จากพิกัด lat, lon\nexport async function fetchWeatherData(lat, lon) {\n  try {\n    let [weatherPromise, forcastPromise] = await Promise.all([fetch(`${WEATHER_API_URL}/weather?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`), fetch(`${WEATHER_API_URL}/forecast?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`)]);\n    const weatherResponse = await weatherPromise.json();\n    const forcastResponse = await forcastPromise.json();\n    return [weatherResponse, forcastResponse];\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// แปลงชื่อเมือง (ภาษาไทยหรืออังกฤษ) เป็นพิกัด lat/lon ด้วย OpenCage\nexport async function fetchCities(input) {\n  try {\n    const response = await fetch(`https://api.opencagedata.com/geocode/v1/json?q=${encodeURIComponent(input)}&key=${OPENCAGE_API_KEY}&language=en`);\n    const data = await response.json();\n    if (data.results.length === 0) {\n      console.log('ไม่พบเมืองที่ค้นหา');\n      return null;\n    }\n    const {\n      lat,\n      lng\n    } = data.results[0].geometry;\n    return {\n      lat,\n      lon: lng\n    }; // คืนพิกัดออกมาเพื่อใช้กับ weather API\n  } catch (error) {\n    console.log(error);\n    return null;\n  }\n}","map":{"version":3,"names":["OPENCAGE_API_KEY","WEATHER_API_URL","WEATHER_API_KEY","fetchWeatherData","lat","lon","weatherPromise","forcastPromise","Promise","all","fetch","weatherResponse","json","forcastResponse","error","console","log","fetchCities","input","response","encodeURIComponent","data","results","length","lng","geometry"],"sources":["C:/Users/Thoz/Desktop/the-weather-forecasting/src/api/OpenWeatherService.js"],"sourcesContent":["const OPENCAGE_API_KEY = 'ce758446e9d24c0aac1cd8dfb60f757a'; // API Key ของ OpenCage\nconst WEATHER_API_URL = 'https://api.openweathermap.org/data/2.5';\nconst WEATHER_API_KEY = '355a483234ca10a5677f31949a9a0241';\n\n// ดึงข้อมูลสภาพอากาศ (ปัจจุบัน + พยากรณ์) จากพิกัด lat, lon\nexport async function fetchWeatherData(lat, lon) {\n  try {\n    let [weatherPromise, forcastPromise] = await Promise.all([\n      fetch(\n        `${WEATHER_API_URL}/weather?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`\n      ),\n      fetch(\n        `${WEATHER_API_URL}/forecast?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`\n      ),\n    ]);\n\n    const weatherResponse = await weatherPromise.json();\n    const forcastResponse = await forcastPromise.json();\n    return [weatherResponse, forcastResponse];\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// แปลงชื่อเมือง (ภาษาไทยหรืออังกฤษ) เป็นพิกัด lat/lon ด้วย OpenCage\nexport async function fetchCities(input) {\n  try {\n    const response = await fetch(\n      `https://api.opencagedata.com/geocode/v1/json?q=${encodeURIComponent(\n        input\n      )}&key=${OPENCAGE_API_KEY}&language=en`\n    );\n\n    const data = await response.json();\n\n    if (data.results.length === 0) {\n      console.log('ไม่พบเมืองที่ค้นหา');\n      return null;\n    }\n\n    const { lat, lng } = data.results[0].geometry;\n    return { lat, lon: lng }; // คืนพิกัดออกมาเพื่อใช้กับ weather API\n  } catch (error) {\n    console.log(error);\n    return null;\n  }\n}\n"],"mappings":"AAAA,MAAMA,gBAAgB,GAAG,kCAAkC,CAAC,CAAC;AAC7D,MAAMC,eAAe,GAAG,yCAAyC;AACjE,MAAMC,eAAe,GAAG,kCAAkC;;AAE1D;AACA,OAAO,eAAeC,gBAAgBA,CAACC,GAAG,EAAEC,GAAG,EAAE;EAC/C,IAAI;IACF,IAAI,CAACC,cAAc,EAAEC,cAAc,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACvDC,KAAK,CACH,GAAGT,eAAe,gBAAgBG,GAAG,QAAQC,GAAG,UAAUH,eAAe,eAC3E,CAAC,EACDQ,KAAK,CACH,GAAGT,eAAe,iBAAiBG,GAAG,QAAQC,GAAG,UAAUH,eAAe,eAC5E,CAAC,CACF,CAAC;IAEF,MAAMS,eAAe,GAAG,MAAML,cAAc,CAACM,IAAI,CAAC,CAAC;IACnD,MAAMC,eAAe,GAAG,MAAMN,cAAc,CAACK,IAAI,CAAC,CAAC;IACnD,OAAO,CAACD,eAAe,EAAEE,eAAe,CAAC;EAC3C,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACpB;AACF;;AAEA;AACA,OAAO,eAAeG,WAAWA,CAACC,KAAK,EAAE;EACvC,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAC1B,kDAAkDU,kBAAkB,CAClEF,KACF,CAAC,QAAQlB,gBAAgB,cAC3B,CAAC;IAED,MAAMqB,IAAI,GAAG,MAAMF,QAAQ,CAACP,IAAI,CAAC,CAAC;IAElC,IAAIS,IAAI,CAACC,OAAO,CAACC,MAAM,KAAK,CAAC,EAAE;MAC7BR,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;MACjC,OAAO,IAAI;IACb;IAEA,MAAM;MAAEZ,GAAG;MAAEoB;IAAI,CAAC,GAAGH,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACG,QAAQ;IAC7C,OAAO;MAAErB,GAAG;MAAEC,GAAG,EAAEmB;IAAI,CAAC,CAAC,CAAC;EAC5B,CAAC,CAAC,OAAOV,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IAClB,OAAO,IAAI;EACb;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}